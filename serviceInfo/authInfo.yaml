openapi: 3.0.2
info:
  title: Данные авторизации
  version: 1.0.0
  description: |
    ___
    Расширенное описание метода
    ___

servers:
  # Можно задать несколько URL для тестирования на разных серверах
  - url: http://localhost:8080/v1
    description: Основной урл

tags:
  # К тегу привязываются методы. Используется для фильтрации методов и деления на разделы.
  - name: authInfo
    description: authInfo

paths:
  /authInfo:
    post:
      tags:
        - authInfo
      summary: authInfo
      description: authInfo
      
      requestBody:
        description: |
          Метаданные файла, которые необходимо загрузить в базу, а также содержимое файла. 
          
          **Content-Type: application/json** используется только для визуализации тела запроса в SwaggerUI

          **Content-Type: application/x-www-form-urlencoded** используется для выполнения запросов
        content:
          application/json:
            schema:  
              $ref: "#/components/schemas/reqAuthInfo"
          application/x-www-form-urlencoded:
            schema:  
              $ref: "#/components/schemas/reqAuthInfo"

      responses: 
          '200':
            description: Ok
            content:
              application/json:
                schema:
                  $ref: "#/components/schemas/respAuthInfo"
              application/x-www-form-urlencoded:
                schema:  
                  $ref: "#/components/schemas/respAuthInfo"

                
components:
  schemas:
    authInfo:
      title: authInfo
      type: object
      properties:
        employeeId: 
          type: string
          format: uuid
          description: |
            Идентификатор аутентифицированного сотрудника
        authDate: 
          type: string
          format: date-time
          description: |
            Дата и время аутентификации приведенные к UTC + 0
        

    respAuthInfo:
      title: respAuthInfo
      type: object
      properties:
        result:
          type: object
        errors:
          type: array
          items:
            $ref: "#/components/schemas/error"
        status:
          type: string
          example: SUCCESS / WARNING / ERROR

    reqAuthInfo:
      title: reqAuthInfo
      type: object
      properties:
        request:
          $ref: "#/components/schemas/authInfo"

    # шаблон объекта listInfo для ответов на запросы с фильтрацией, сортировкой и пагинацией
    resultFSP:
      title: resultFSP
      type: object
      properties:
        limit:
          type: integer
        offset:
          type: integer
        count:
          type: integer

    # шаблон диапазона дат для фильтрации
    dateRangeTemplate:
      title: dateRangeTemplate
      type: object
      properties:
        from:
          type: string
          format: date
        to:
          type: string
          format: date

    # шаблон ответа. На бэке ППРБ3 формируется через класс ApiResponse
    responseTemplate:
      title: responseTemplate
      type: object
      properties:
        result:
          type: object
          #type: array
          #items:
          #  item
        errors:
          type: array
          items:
            $ref: "#/components/schemas/error"
        status:
          type: string
          example: SUCCESS / WARNING / ERROR
    
    # шаблон структуры для массива errors
    error:
      title: error
      description: Структура элемента массива errors
      type: object
      properties:
        code:
          type: string
          description: Код ошибки
          example: Какой-то код ошибки
        message:
          type: string
          description: Описание ошибки
          example: Какое-то описание ошибки
    
    # шаблон структуры справочника
    dictionary:
      title: dictionary
      description: Структура стандартного справочника
      type: object
      properties:
        code:
          type: string
          description: Идентификатор записи (первичный ключ)
        name:
          type: string
          description: Наименование элемента 
        nameEn:
          type: string
          description: Наименование элемента на английском языке

  parameters:
    limit:  
      name: limit
      in: query
      required: true
      description: Ограничение количества элементов в выборке. Значение - 0 - выбрать всё
      schema:
        type: integer
        format: uint
        minimum: 0
        example: 10
    
    offset:  
      name: offset
      in: query
      required: true
      description: Смещение страницы - 0, 1, 2 и т.д.
      schema:
        type: integer
        format: uint
        example: 0
      
    returnCount:  
      name: returnCount
      in: query
      required: false
      description: Указывается нужно ли возвращать общее количество элементов
      schema:
        type: boolean
        example: true
      
    returnOnlyCount:  
      name: returnOnlyCount
      in: query
      required: false
      description: Указывается нужно ли вернуть только количество элементов
      schema:
        type: boolean
        example: false

    sortUsers:
      name: sort
      in: query
      required: false
      description: В сортировке указываются направление сортировки(+/-) и имена полей через запятую.
      schema:
        type: string
        # Скорректировать пример для текущего метода ->
        example: -fullName


